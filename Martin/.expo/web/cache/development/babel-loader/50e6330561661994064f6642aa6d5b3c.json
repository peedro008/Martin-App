{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\tobia\\\\App-----Martin-Food\\\\Martin-App\\\\Martin\\\\screens\\\\Client\\\\stack\\\\productDetail.js\";\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport { addOrder } from \"../../../actions.js\";\nimport { IP } from \"../../../env.js\";\nimport { useDispatch, useSelector } from 'react-redux';\nexport default function ProductDetail(_ref) {\n  var route = _ref.route,\n      navigation = _ref.navigation;\n  var id = route.params.id;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      product = _useState2[0],\n      setProduct = _useState2[1];\n\n  var _useState3 = useState(0),\n      _useState4 = _slicedToArray(_useState3, 2),\n      count = _useState4[0],\n      setCount = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      added = _useState6[0],\n      setAdded = _useState6[1];\n\n  var dispatch = useDispatch();\n  var preOrder = useSelector(function (state) {\n    return state.PreOrder;\n  });\n  useEffect(function () {\n    axios.get(IP + \"/products?id=\" + id).then(function (response) {\n      setProduct(response.data);\n    }).catch(function (error) {\n      console.log(error);\n    });\n  }, []);\n\n  var handleCount = function handleCount() {\n    if (count > 0) {\n      setCount(count - 1);\n    }\n  };\n\n  var handleAddProduct = function handleAddProduct() {\n    var order = {\n      name: product.name,\n      id: product.id,\n      price: product.price - product.price * product.salePercent / 100,\n      sale: product.sale,\n      salePercent: product.salePercent,\n      img: product.img,\n      quantity: count,\n      total: product.price * count\n    };\n    var aux = preOrder.filter(function (el) {\n      return el.name == order.name;\n    });\n\n    if (aux.length < 1 && count > 0) {\n      dispatch(addOrder(order));\n      setAdded(true);\n    } else if (count === 0) {\n      alert(\"Select the quantity\");\n    }\n  };\n\n  return React.createElement(View, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }\n  }, React.createElement(Text, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }\n  }, product.name), React.createElement(Image, {\n    source: {\n      uri: product.img\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 11\n    }\n  }), React.createElement(Text, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }\n  }, product.description), React.createElement(View, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }\n  }, React.createElement(Button, {\n    title: \"+\",\n    onPress: function onPress() {\n      return setCount(count + 1);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 17\n    }\n  }), React.createElement(Text, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 17\n    }\n  }, count), React.createElement(Button, {\n    title: \"-\",\n    onPress: function onPress() {\n      return handleCount();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 17\n    }\n  })), React.createElement(Text, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }\n  }, \"Price: USD \", product.price, \" \", product.sale && \"(On sale)\" + React.createElement(\"strike\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 76\n    }\n  }, \"product.price\") + \" \" + \"%\" + product.salePercent), React.createElement(Text, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 13\n    }\n  }, \"TOTAL: USD \", product.price * count), !added ? React.createElement(Button, {\n    title: \"Add to cart\",\n    onPress: function onPress() {\n      return handleAddProduct();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 23\n    }\n  }) : React.createElement(View, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 27\n    }\n  }, React.createElement(View, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 29\n    }\n  }, React.createElement(TouchableOpacity, {\n    onPress: function onPress() {\n      return navigation.navigate(\"Cart\");\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 33\n    }\n  }, React.createElement(Text, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 37\n    }\n  }, \" Go to cart \")))));\n}","map":{"version":3,"sources":["C:/Users/tobia/App-----Martin-Food/Martin-App/Martin/screens/Client/stack/productDetail.js"],"names":["React","useState","useEffect","axios","addOrder","IP","useDispatch","useSelector","ProductDetail","route","navigation","id","params","product","setProduct","count","setCount","added","setAdded","dispatch","preOrder","state","PreOrder","get","then","response","data","catch","error","console","log","handleCount","handleAddProduct","order","name","price","salePercent","sale","img","quantity","total","aux","filter","el","length","alert","uri","description","navigate"],"mappings":"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","sourcesContent":["import React,{useState,useEffect} from 'react'\r\nimport axios from 'axios'\r\nimport { StyleSheet, Text, View, Image, Button,TouchableOpacity } from 'react-native'\r\nimport {addOrder} from '../../../actions.js'\r\nimport { IP } from '../../../env.js'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\n\r\nexport default function ProductDetail({route,navigation}) {\r\n    let {id} = route.params;\r\n    const [product, setProduct]= useState([]);\r\n    const [count, setCount] = useState(0);\r\n    const [added,setAdded] = useState(false)\r\n    const dispatch= useDispatch();\r\n    const preOrder= useSelector(state=>state.PreOrder)\r\n\r\n    useEffect(()=>{\r\n        axios.get(`${IP}/products?id=${id}`)\r\n            .then(function(response){\r\n                setProduct(response.data)\r\n            })\r\n            .catch(error=>{\r\n              console.log(error)  \r\n            })\r\n             \r\n        },[])\r\n\r\n        const handleCount=()=>{\r\n            if(count>0){\r\n                setCount(count - 1);\r\n            } \r\n        }\r\n\r\n       let handleAddProduct=()=>{\r\n            let order={\r\n                name:product.name,\r\n                id:product.id,\r\n                price: product.price -(product.price * product.salePercent / 100),\r\n                sale:product.sale,\r\n                salePercent: product.salePercent,\r\n                img: product.img,\r\n                quantity:count,\r\n                total: product.price * count\r\n            }\r\n                let aux= preOrder.filter(el=> el.name == order.name)\r\n                if(aux.length <1 && count>0){\r\n                    dispatch(addOrder(order))\r\n                    setAdded(true)\r\n                    \r\n                }else if( count===0){\r\n                    alert(\"Select the quantity\")\r\n                }\r\n       }\r\n        \r\n       \r\n\r\n    return (\r\n        <View>\r\n            <Text>{product.name}</Text>\r\n          <Image source={{uri: product.img}} />\r\n            <Text>{product.description}</Text>\r\n            <View> \r\n                <Button title=\"+\" onPress={()=> setCount(count + 1)}/>\r\n                <Text>{count}</Text>\r\n                <Button title=\"-\" onPress={()=> handleCount()}/>\r\n            </View>\r\n\r\n            <Text>Price: USD {product.price} {product.sale && \"(On sale)\"+ <strike>product.price</strike> + \" \" + \"%\"+product.salePercent}</Text>\r\n            <Text>TOTAL: USD {product.price * count}</Text>\r\n            {!added ? <Button title=\"Add to cart\" onPress={()=>handleAddProduct()}/>\r\n            \r\n            :             <View>\r\n                            <View>\r\n                                <TouchableOpacity onPress={()=>navigation.navigate(\"Cart\")}>\r\n                                \r\n                                    <Text> Go to cart </Text>\r\n                                </TouchableOpacity>\r\n                            </View>\r\n                          </View>\r\n            }\r\n        </View>\r\n    )\r\n}\r\n\r\n// const styles = StyleSheet.create({\r\n//     count:{\r\n//         display: 'flex',\r\n//         justifyContent:'center'\r\n//     },\r\n//     goToCart:{\r\n//         display:'flex',\r\n//         justifyContent:'center',\r\n//         marginLeft:'38%'\r\n//     },\r\n    // cart:{\r\n    //     display:'flex',\r\n    //     justifyContent:'center',\r\n    //     borderRadius:'10px',\r\n    //     color: \"#fff\",\r\n    //     backgroundColor: \"green\",\r\n    //     width: \"40%\",\r\n    //     height:\"5\",\r\n    //     fontWeight:\"500\"\r\n    // }\r\n\r\n// })\r\n"]},"metadata":{},"sourceType":"module"}